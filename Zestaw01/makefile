CXX = g++
CXXFLAGS = -std=c++11
STACK_TARGET = stack.x
GENERATOR_TARGET = generator.x
ONP_TARGET = ONP.x  
SRCS = stack.cpp
GENERATOR_SRCS = generator.cpp
ONP_SRCS = ONP.cpp 
OBJS = $(SRCS:.cpp=.o)
GENERATOR_OBJS = $(GENERATOR_SRCS:.cpp=.o)
ONP_OBJS = $(ONP_SRCS:.cpp=.o)  

all: $(STACK_TARGET) $(GENERATOR_TARGET) $(ONP_TARGET)  #

$(STACK_TARGET): $(OBJS)
	$(CXX) $(CXXFLAGS) -o $(STACK_TARGET) $(OBJS)

$(GENERATOR_TARGET): $(GENERATOR_OBJS)
	$(CXX) $(CXXFLAGS) -o $(GENERATOR_TARGET) $(GENERATOR_OBJS)

$(ONP_TARGET): $(ONP_OBJS)
	$(CXX) $(CXXFLAGS) -o $(ONP_TARGET) $(ONP_OBJS) 

%.o: %.cpp
	$(CXX) $(CXXFLAGS) -c $<

run: $(STACK_TARGET)
	./$(STACK_TARGET)

generate: $(GENERATOR_TARGET)
	./$(GENERATOR_TARGET) | ./$(STACK_TARGET)

onp: $(ONP_TARGET)  
	./$(ONP_TARGET)  

clean:
	rm -f $(OBJS) $(GENERATOR_OBJS) $(ONP_OBJS) $(STACK_TARGET) $(GENERATOR_TARGET) $(ONP_TARGET)

.PHONY: all run generate onp clean  
