CXX = g++
CXXFLAGS = -std=c++11
QUEUE_TARGET = Queue.x
GENERATOR_TARGET = Generator.x
RADIX_TARGET = Radix.x 
SRCS = Queue.cpp
GENERATOR_SRCS = Generator.cpp
RADIX_SRCS = Radix.cpp  
OBJS = $(SRCS:.cpp=.o)
GENERATOR_OBJS = $(GENERATOR_SRCS:.cpp=.o)
RADIX_OBJS = $(RADIX_SRCS:.cpp=.o)  

all: $(QUEUE_TARGET) $(GENERATOR_TARGET) $(RADIX_TARGET)  

$(QUEUE_TARGET): $(OBJS)
	$(CXX) $(CXXFLAGS) -o $(QUEUE_TARGET) $(OBJS)

$(GENERATOR_TARGET): $(GENERATOR_OBJS)
	$(CXX) $(CXXFLAGS) -o $(GENERATOR_TARGET) $(GENERATOR_OBJS)

$(RADIX_TARGET): $(RADIX_OBJS)  
	$(CXX) $(CXXFLAGS) -o $(RADIX_TARGET) $(RADIX_OBJS)  

%.o: %.cpp
	$(CXX) $(CXXFLAGS) -c $<

run: $(QUEUE_TARGET)
	./$(QUEUE_TARGET)

generate: $(GENERATOR_TARGET)
	./$(GENERATOR_TARGET) | ./$(QUEUE_TARGET)

radix: $(RADIX_TARGET) 
	./$(RADIX_TARGET)  

clean:
	rm -f $(OBJS) $(GENERATOR_OBJS) $(RADIX_OBJS) $(QUEUE_TARGET) $(GENERATOR_TARGET) $(RADIX_TARGET)  

.PHONY: all run generate radix clean
